## Notes for the Advanced DOM and Events section

In this section I continued creating the web app called Bankist
The js is therefore divided into bankist code and lessons code.

- DOM
  - Allows JavaScript to interact with the browser (delete, modify, create, … elements)
  - DOM tree is generated from an HTML document and is interactible
  - Consists of nodes represented by a JS object
  - Each node type has different methods
- Selecting, Creating, Deleting elements
  - Selecting elements
    - Always `document.`
    - Selecting the entire document: `document.documentElement`
    - Selecting body & head: `document.body` & `document.head`
    - Selecting the first el by a selector (class, id, ...): `document.querySelector('.header')`
    - Selecting all els by a selector (class, id, tag, …): `document.querySelectorAll('.section')`
      - Returns a node list
    - Selecting the first el by it’s id: `document.getElementById('section--1')`
    - Selecting all els by tag name: `document.getElementsByTagName('button')`
      - Returns a HTMLCollection - updates automatically whenever changed
    - Selecting all els by class name: `document.getElementsByClassName('btn')`
      - Returns a HTMLCollection - updates automatically whenever changed
  - Creating elements
    - Inserting actaull html string: `<element>.insertAdjecentHTML(<position>, <html>)`
    - Creating an element programatically: `document.createElement('div')`
      - Can be manipulated like any other DOM element
      - Adding it to the DOM: `<element>.prepend` or `.append(<Node>)` or `.before(<element>)` or `.after(<element>)`
  - Deleting elements
    - `<element>.remove()`
- Styles
  - `<element>.style.<style> = ‘<value with units>’;`
  - <style> is camelCased
  - The style is set as an inline style
  - Only programaticaly set styles can be accessed by `<element>.style.<style>`
  - To read any style need to use `getComputedStyle(<element>).<style>` - returns a string
- Custom properties
  - We can change these by code
  - `document.documentElement.style.setProperty(<propertry name>, <new value>);`
- Attributes
  - We can access element attributes (src, href, alt, className, …) through code
    - Only html attributes recognized by html
    - Custom attributes are accessed: `<element>.getAttribute(’<attribute>’);`
  - We can set attributes: (same as styles) OR `<element>.setAttribute(<attribute>, <value>);`
  - With paths the returned value is absolute unless called with getAttribute
  - **Data attributes** are set with: `data-<name-name> = “<value>”`
    - In code are accessed: `<element>.dataset.<name(camelCase)>;`
- classList methods
  - add - adds a class
  - remove - removes a class
  - toggle - removes when present or vice-versa
  - contains - checks if the class is present
- Smooth Scrolling
  - `<element>.scrollIntoView({ behavior: 'smooth' });`
- Events
  - Signal generated by a DOM node (’something has happened’)
  - Handling events with: `.addEventListener()`
  - Removing events: `<element>.removeEventListener(<event, <name of func>);`
    - Function must be named
  - Reference: [https://www.w3schools.com/jsref/dom_obj_event.asp](https://www.w3schools.com/jsref/dom_obj_event.asp)
  - Bubbling and Capturing (Propagation)
    - Events happen on all parent elements of the clicked element
    - Stop propagation: `e.stopPropagation()`
    - addEventListener listens for bubbling events, but if the third parameter is set to true it listens during capturing (happens first)
  - Event delegation
    - Putting an event listener on a common parent of all given elements
- DOM traversing (all codes below should start with <element>)
  - Child elements
    - `.querySelector()` - works **not only** with document
      - works to any depth
    - `.childNodes` - every direct child node
    - `.children` - live collection of all direct child elements
    - `.firstElementChild` - first direct child element
    - `.lastElementChild` - last direct child element
  - Parent elements
    - `.parentNode` - direct parent node
    - `.parentElement` - direct parent element
    - `.closest(<query>)` - closest parent following the given query
  - Sibling elements
    - Only direct siblings
    - `.previousElementSibling` - direct above sibling element
    - `.nextElementSibling` - direct next sibling element
- Passing arguments to Event Handlers
  - The Event Handle function can only formally take one argument: e
  - Creating a fucntion to execute our function
  ```jsx
  <element>.addEventListener(<event>, function (e) {
  	myFunction(arg1, arg2);
  });
  ```
  - Using bind method to change the this keyword to the argument
  ```jsx
  <element>.addEventListener(<event>, myFunction.bind(<argument>));
  ```
- Intersection Observer API
  - Observes changes to the way a certain target element intersects another element or the viewport
  - Initialization:
    - `const observer = new IntersectionObserver(<callback function>, <options>)`
    - options: `{root: <element to check with for the intersection (null - viewport)>, threshold: [] <how much of the element shouldbe visible when triggering observer>, rootMargin: <adjusting the size of the root element>}`
    - callback function: `function callback (entries, observer) {}` - what should happen when the observer is triggered
      - entries: list of all thresholds
      - observer: observer object
      <aside>
      ❗ `observer.observe(<element that we want to watch>);`
      
      </aside>

- Lazy loading
  - Optimizes loading speed of websites
- Lifecycle DOM Events
  - First document event: `‘DOMContentLoaded’` is fired upon parsing the HTML document, does not wait for images or other external sources
  - First window event: `‘load’` is fired when ALL resources have been loaded
  - Last window event: ‘beforeunload’ if fired just before exiting a webpage
- Loading Scripts
  - Influences the way javascipt files are loaded and executed and when the DOMContentLoaded event is fired
  - Regular (`<script src=”script.js”>`) - The document waits for the script to be loaded and executed (if we need to support old browsers)
  - Async (`<script async src=”script.js”>`) - The script is fetched asynchronously and executed immidiately (used for large 3rd-party scripts where order doesn’t matter)
  - Defer (`<script defer src=”script.js”>`) - The script is loaded asynchronously but it is executed at the end of HTML parsing (used for own scripts and when order matters)
